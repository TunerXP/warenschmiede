<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Interaktiver Prompt-Trainer von Warenschmiede: √úbe Eingaben f√ºr ChatGPT, lass sie bewerten und verbessere deine Prompts mit Beispielen.">
    <link rel="canonical" href="https://www.warenschmiede.com/ki/promt-trainer.html">
    <title>Warenschmiede KI ‚Äì Prompt-Trainer</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        slate: {
                            850: '#1e293b', // Custom dark card bg
                            900: '#0f172a', // Main bg
                            950: '#020617', // Darker details
                        },
                        brand: {
                            blue: '#3b82f6',
                            accent: '#06b6d4'
                        }
                    },
                    fontFamily: {
                        mono: ['ui-monospace', 'SFMono-Regular', 'Menlo', 'Monaco', 'Consolas', 'monospace'],
                    },
                    animation: {
                        'pulse-slow': 'pulse 3s cubic-bezier(0.4, 0, 0.6, 1) infinite',
                        'bounce-slight': 'bounce-slight 1s infinite'
                    },
                    keyframes: {
                        'bounce-slight': {
                            '0%, 100%': { transform: 'translateY(-2px)' },
                            '50%': { transform: 'translateY(0)' },
                        }
                    }
                }
            }
        }
    </script>
    <style>
        /* Custom Scrollbar f√ºr Dark Mode */
        ::-webkit-scrollbar {
            width: 8px;
        }
        ::-webkit-scrollbar-track {
            background: #0f172a; 
        }
        ::-webkit-scrollbar-thumb {
            background: #334155; 
            border-radius: 4px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #475569; 
        }

        /* Animation f√ºr Chat Bubbles */
        .bubble-enter {
            animation: popIn 0.3s ease-out forwards;
            opacity: 0;
            transform: translateY(10px);
        }
        
        @keyframes popIn {
            to { opacity: 1; transform: translateY(0); }
        }

        .typing-dot {
            animation: typing 1.4s infinite ease-in-out both;
        }
        .typing-dot:nth-child(1) { animation-delay: -0.32s; }
        .typing-dot:nth-child(2) { animation-delay: -0.16s; }
        
        @keyframes typing {
            0%, 80%, 100% { transform: scale(0); }
            40% { transform: scale(1); }
        }
        
        /* Reward Card Animation */
        .reward-enter {
            animation: slideInUp 0.6s ease-out forwards;
        }
        @keyframes slideInUp {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
    </style>
</head>
<body class="bg-slate-900 text-slate-200 antialiased min-h-screen flex flex-col">

    <!-- 1. TOP NAV (Zur√ºck Link) -->
    <div class="bg-slate-950 border-b border-slate-800 text-xs py-2 px-4">
        <div class="max-w-7xl mx-auto flex justify-between items-center">
            <a href="https://www.warenschmiede.com/" class="flex items-center gap-2 text-slate-400 hover:text-white transition-colors group">
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-4 h-4 group-hover:-translate-x-1 transition-transform">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M10.5 19.5L3 12m0 0l7.5-7.5M3 12h18" />
                </svg>
                Zur√ºck zur Warenschmiede
            </a>
            <span class="hidden sm:inline text-slate-600">Kostenloses Lern-Tool</span>
        </div>
    </div>

    <!-- 2. MAIN HEADER -->
    <header class="bg-slate-950/80 backdrop-blur-md border-b border-slate-800 py-4 px-6 sticky top-0 z-50">
        <div class="max-w-7xl mx-auto flex items-center justify-between gap-3">
            
            <!-- Logo & Title -->
            <div class="flex items-center gap-3">
                <div class="w-10 h-10 bg-gradient-to-br from-brand-blue to-brand-accent rounded-lg flex items-center justify-center text-white font-bold shadow-lg shadow-blue-900/20 flex-shrink-0">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M8.625 12a.375.375 0 11-.75 0 .375.375 0 01.75 0zm0 0H8.25m4.125 0a.375.375 0 11-.75 0 .375.375 0 01.75 0zm0 0H12m4.125 0a.375.375 0 11-.75 0 .375.375 0 01.75 0zm0 0h-.375M21 12c0 4.556-4.03 8.25-9 8.25a9.764 9.764 0 01-2.555-.337A5.972 5.972 0 015.41 20.97a5.969 5.969 0 01-.474-.065 4.48 4.48 0 00.978-2.025c.09-.457-.133-.901-.467-1.226C3.93 16.178 3 14.189 3 12c0-4.556 4.03-8.25 9-8.25s9 3.694 9 8.25z" />
                    </svg>
                </div>
                <div class="leading-tight">
                    <h1 class="text-lg md:text-xl font-bold text-white tracking-tight">Warenschmiede KI <span class="hidden sm:inline text-brand-accent font-normal">| Prompt-Trainer</span></h1>
                    <p class="text-xs text-slate-400">Lerne spielerisch, wie man gute Prompts schreibt.</p>
                </div>
            </div>

            <div class="flex items-center gap-3">
                 <!-- Optionales Mini-Badge im Header -->
                 <div id="header-badge" class="hidden text-xs font-bold text-emerald-400 bg-emerald-900/30 border border-emerald-500/30 px-3 py-1 rounded-full animate-pulse-slow">
                    üèÜ Prompt-Profi
                </div>

                <!-- Share Button -->
                <button onclick="sharePage()" class="flex items-center gap-2 bg-brand-accent hover:bg-cyan-400 text-slate-950 font-bold px-4 py-2 rounded-full transition-all shadow-lg shadow-cyan-900/20 active:scale-95 text-sm">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" class="w-4 h-4">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M7.217 10.907a2.25 2.25 0 100 2.186m0-2.186c.18.324.283.696.283 1.093s-.103.77-.283 1.093m0-2.186l9.566-5.314m-9.566 7.5l9.566 5.314m0 0a2.25 2.25 0 103.935 2.186 2.25 2.25 0 00-3.935-2.186zm0-12.814a2.25 2.25 0 103.933-2.185 2.25 2.25 0 00-3.933 2.185z" />
                    </svg>
                    <span class="hidden sm:inline">Trainer teilen</span>
                    <span class="sm:hidden">Teilen</span>
                </button>
            </div>
        </div>
    </header>

    <!-- MAIN CONTENT -->
    <main class="flex-grow max-w-7xl mx-auto w-full p-4 lg:p-6 grid grid-cols-1 lg:grid-cols-12 gap-6">

        <section class="lg:col-span-12 bg-slate-850 border border-slate-700 rounded-xl p-5 shadow-lg">
            <p class="text-sm uppercase tracking-wider text-slate-400 font-semibold mb-2">Kurzer Einstieg</p>
            <h1 class="text-2xl font-bold text-white mb-3">Prompt-Trainer f√ºr deinen KI-Start</h1>
            <p class="text-slate-300">Lerne, wie du klare Aufgaben an ChatGPT stellst: W√§hle eine Szene, teste gute und schlechte Prompts und sieh sofort Feedback. Die Grundlagen findest du in der <a class="text-brand-blue underline" href="/ki/index.html">KI-√úbersicht</a> und passende Beispiele auf der Seite <a class="text-brand-blue underline" href="/ki/prompts.html">KI-Prompts</a>.</p>
        </section>

        <!-- SPALTE 1: SZENEN-AUSWAHL -->
        <section class="lg:col-span-3 flex flex-col gap-4">
            <h2 class="text-sm uppercase tracking-wider text-slate-500 font-bold mb-1">1. W√§hle eine Aufgabe</h2>
            <div id="scene-list" class="space-y-3">
                <!-- Wird per JS gef√ºllt -->
            </div>
        </section>

        <!-- SPALTE 2: CHAT-SIMULATION -->
        <section class="lg:col-span-5 flex flex-col h-[600px] lg:h-auto bg-slate-850 rounded-xl border border-slate-700 shadow-xl overflow-hidden relative">
            
            <!-- Chat Header -->
            <div class="bg-slate-800 p-3 border-b border-slate-700 flex justify-between items-center">
                <span id="chat-title" class="font-medium text-white">Bitte Szene w√§hlen...</span>
                <span class="text-xs bg-brand-blue/20 text-brand-blue px-2 py-0.5 rounded-full border border-brand-blue/30">Bot Simulation</span>
            </div>

            <!-- Chat Area -->
            <div id="chat-window" class="flex-grow p-4 overflow-y-auto space-y-4 bg-slate-900/50">
                <!-- Initial Message -->
                <div class="flex gap-3">
                    <div class="w-8 h-8 rounded-full bg-slate-700 flex items-center justify-center flex-shrink-0 text-xs">AI</div>
                    <div class="bg-slate-800 text-slate-300 p-3 rounded-2xl rounded-tl-none text-sm shadow-sm border border-slate-700/50 max-w-[85%]">
                        Hallo! W√§hle links eine Aufgabe aus, dann zeige ich dir den Unterschied zwischen guten und schlechten Anweisungen (Prompts).
                    </div>
                </div>
            </div>

            <!-- Controls Area -->
            <div class="bg-slate-800 p-4 border-t border-slate-700 space-y-4">
                
                <!-- Preset Buttons -->
                <div class="grid grid-cols-2 gap-3">
                    <button onclick="sendPrompt('bad')" id="btn-bad" class="group relative px-4 py-3 bg-red-900/20 hover:bg-red-900/30 border border-red-800/50 rounded-lg text-left transition-all disabled:opacity-50 disabled:cursor-not-allowed">
                        <div class="text-xs text-red-400 font-bold mb-1">üëé Schlechter Prompt</div>
                        <div class="text-[10px] text-slate-400 leading-tight group-hover:text-slate-300">Zuf√§lliges Beispiel (unklar, kurz).</div>
                    </button>
                    <button onclick="sendPrompt('good')" id="btn-good" class="group relative px-4 py-3 bg-emerald-900/20 hover:bg-emerald-900/30 border border-emerald-800/50 rounded-lg text-left transition-all disabled:opacity-50 disabled:cursor-not-allowed">
                        <div class="text-xs text-emerald-400 font-bold mb-1">üëç Guter Prompt</div>
                        <div class="text-[10px] text-slate-400 leading-tight group-hover:text-slate-300">Zuf√§lliges Beispiel (strukturiert).</div>
                    </button>
                </div>

                <!-- Custom Input -->
                <div class="border-t border-slate-700 pt-3">
                    <label class="text-xs text-slate-500 mb-1 block">Oder teste deine eigene Version:</label>
                    <div class="flex gap-2">
                        <textarea id="custom-input" rows="1" placeholder="Schreibe hier einen Prompt..." class="w-full bg-slate-900 border border-slate-700 rounded-md px-3 py-2 text-sm focus:outline-none focus:border-brand-blue resize-none"></textarea>
                        <button onclick="showUserPrompt()" class="bg-slate-700 hover:bg-slate-600 text-white px-3 py-2 rounded-md text-xs font-medium transition-colors">
                            Pr√ºfen
                        </button>
                    </div>
                    <!-- Hinweis -->
                    <p class="text-[10px] text-slate-500 mt-2 italic flex gap-1 items-center">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-3 h-3 text-slate-600">
                          <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z" clip-rule="evenodd" />
                        </svg>
                        Hinweis: Hier bekommst du nur eine Bewertung, keine echte KI-Antwort. Teste deinen Prompt sp√§ter in einem echten KI-Chat.
                    </p>
                </div>
            </div>
        </section>

        <!-- SPALTE 3: ANALYSE & FORTSCHRITT -->
        <section class="lg:col-span-4 space-y-6">
            
            <!-- Analyse Card -->
            <div class="bg-slate-850 rounded-xl border border-slate-700 p-5 shadow-lg relative">
                <!-- Fortschrittsanzeige -->
                <div id="progress-summary" class="absolute top-5 right-5 text-[11px] text-slate-400 font-mono">
                    Szenen erledigt: 0 / 4
                </div>

                <h2 class="text-sm uppercase tracking-wider text-brand-accent font-bold mb-4 border-b border-slate-700 pb-2">Prompt Analyse</h2>
                
                <!-- Score Header -->
                <div class="flex items-center gap-4 mb-6">
                    <div class="relative w-16 h-16 flex items-center justify-center">
                        <div class="w-full h-full rounded-full border-4 border-slate-700" id="score-ring-bg"></div>
                        <div class="absolute text-xl font-bold text-white" id="score-value">-</div>
                    </div>
                    <div>
                        <div class="text-sm text-slate-400">Qualit√§ts-Score</div>
                        <div class="text-xs text-slate-500" id="score-text">Warte auf Eingabe...</div>
                    </div>
                </div>

                <!-- Criteria List -->
                <div class="space-y-3 mb-6">
                    <!-- Klarheit -->
                    <div>
                        <div class="flex justify-between text-xs mb-1">
                            <span class="text-slate-300">Klarheit & Pr√§zision</span>
                            <span id="crit-clarity-val" class="text-slate-500">0/25</span>
                        </div>
                        <div class="w-full bg-slate-700 h-1.5 rounded-full overflow-hidden">
                            <div id="crit-clarity-bar" class="h-full bg-blue-500 w-0 transition-all duration-500"></div>
                        </div>
                    </div>
                    <!-- Kontext -->
                    <div>
                        <div class="flex justify-between text-xs mb-1">
                            <span class="text-slate-300">Kontext & Zielgruppe</span>
                            <span id="crit-context-val" class="text-slate-500">0/25</span>
                        </div>
                        <div class="w-full bg-slate-700 h-1.5 rounded-full overflow-hidden">
                            <div id="crit-context-bar" class="h-full bg-purple-500 w-0 transition-all duration-500"></div>
                        </div>
                    </div>
                    <!-- Struktur -->
                    <div>
                        <div class="flex justify-between text-xs mb-1">
                            <span class="text-slate-300">Format & Struktur</span>
                            <span id="crit-struct-val" class="text-slate-500">0/25</span>
                        </div>
                        <div class="w-full bg-slate-700 h-1.5 rounded-full overflow-hidden">
                            <div id="crit-struct-bar" class="h-full bg-orange-500 w-0 transition-all duration-500"></div>
                        </div>
                    </div>
                    <!-- Beispiele -->
                    <div>
                        <div class="flex justify-between text-xs mb-1">
                            <span class="text-slate-300">Beispiele / Stil</span>
                            <span id="crit-example-val" class="text-slate-500">0/25</span>
                        </div>
                        <div class="w-full bg-slate-700 h-1.5 rounded-full overflow-hidden">
                            <div id="crit-example-bar" class="h-full bg-emerald-500 w-0 transition-all duration-500"></div>
                        </div>
                    </div>
                </div>

                <!-- Explanation Box -->
                <div class="bg-slate-900/50 border border-slate-700/50 rounded-lg p-3 text-sm">
                    <h3 class="font-bold text-slate-200 mb-1 text-xs">üîç Diagnose:</h3>
                    <p id="analysis-text" class="text-slate-400 leading-relaxed text-xs">
                        W√§hle einen Prompt, um zu sehen, warum er gut oder schlecht ist.
                    </p>
                </div>
            </div>

            <!-- REWARD CARD (Versteckt bis fertig) -->
            <div id="reward-card" class="bg-emerald-900/20 border border-emerald-500/40 rounded-xl p-5 shadow-lg shadow-emerald-900/20 hidden reward-enter relative overflow-hidden">
                <!-- Hintergrund Effekt -->
                <div class="absolute top-0 right-0 -mt-2 -mr-2 w-16 h-16 bg-emerald-500/20 blur-xl rounded-full"></div>
                
                <h3 class="text-emerald-300 font-bold text-sm mb-2 flex items-center gap-2">
                    <span class="text-xl">üéâ</span> Gl√ºckwunsch ‚Äì Prompt-Profi!
                </h3>
                <p class="text-xs text-slate-200 mb-3 leading-relaxed">
                    Du hast alle Szenen erfolgreich durchgespielt und kennst jetzt die Tricks f√ºr bessere KI-Antworten.
                </p>
                <div class="bg-emerald-950/40 p-3 rounded-lg border border-emerald-500/20">
                    <p class="text-xs text-slate-400 mb-2">
                        Jetzt wird es ernst! Teste deine neuen Skills direkt in einem echten KI-Tool:
                    </p>
                    <a href="https://www.warenschmiede.com/ki/tools.html" target="_blank" class="inline-flex items-center gap-1 text-xs text-white font-bold hover:text-emerald-300 transition-colors">
                        üëâ KI-Werkzeuge bei Warenschmiede √∂ffnen
                    </a>
                </div>
            </div>

            <!-- Cheatsheet -->
            <div class="bg-slate-800 rounded-xl border border-slate-700 p-5">
                <h3 class="text-xs font-bold text-slate-300 uppercase mb-3">üõ†Ô∏è Bausteine f√ºr Top-Prompts</h3>
                <ul class="space-y-2 text-xs text-slate-400 font-mono">
                    <li class="flex gap-2"><span class="text-brand-blue">Rolle:</span> "Du bist ein Experte f√ºr..."</li>
                    <li class="flex gap-2"><span class="text-brand-blue">Ziel:</span> "Erkl√§re mir..."</li>
                    <li class="flex gap-2"><span class="text-brand-blue">Kontext:</span> "F√ºr Anf√§nger ohne Vorwissen..."</li>
                    <li class="flex gap-2"><span class="text-brand-blue">Format:</span> "Als Liste mit 5 Punkten..."</li>
                    <li class="flex gap-2"><span class="text-brand-blue">Beispiel:</span> "Nutze diesen Stil: ..."</li>
                </ul>
            </div>

        </section>
    </main>

    <!-- FOOTER / LERNBEREICH -->
    <footer class="bg-slate-950 border-t border-slate-800 py-10 px-4 mt-8">
        <div class="max-w-7xl mx-auto grid grid-cols-1 md:grid-cols-4 gap-8">
            
            <!-- Box 1 -->
            <div>
                <h4 class="text-white font-bold mb-3">üí° So nutzt du den Trainer</h4>
                <ul class="text-sm text-slate-400 space-y-2 list-disc list-inside">
                    <li>W√§hle links eine Alltagssituation.</li>
                    <li>Erledige alle Aufgaben (gr√ºner Haken), um Profi zu werden.</li>
                    <li>Vergleiche die Qualit√§t der Antworten.</li>
                    <li>Teste eigene Ideen im Eingabefeld.</li>
                </ul>
            </div>

            <!-- Box 2 -->
            <div>
                <h4 class="text-white font-bold mb-3">‚ú® Goldene Regeln</h4>
                <ul class="text-sm text-slate-400 space-y-2">
                    <li class="flex items-start gap-2">‚úÖ <span>Sei so konkret wie m√∂glich.</span></li>
                    <li class="flex items-start gap-2">‚úÖ <span>Gib der KI eine Rolle ("Du bist...").</span></li>
                    <li class="flex items-start gap-2">‚úÖ <span>Definiere das Ausgabeformat.</span></li>
                    <li class="flex items-start gap-2">‚úÖ <span>Gib Beispiele zur Orientierung.</span></li>
                </ul>
            </div>

            <!-- Box 3 -->
            <div class="bg-brand-blue/10 border border-brand-blue/20 rounded-lg p-4">
                <h4 class="text-brand-blue font-bold mb-2">üöÄ N√§chster Schritt</h4>
                <p class="text-xs text-slate-300 mb-3 leading-relaxed">
                    Wenn du mit den Beispielen hier warm geworden bist, probier deine Prompts in einem echten KI-Chat aus.
                </p>
                <a href="https://www.warenschmiede.com/ki/tools.html" target="_blank" class="inline-flex items-center gap-1 text-sm text-white font-bold hover:text-brand-accent transition-colors">
                    KI-Werkzeuge bei Warenschmiede
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" class="w-3 h-3">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M13.5 6H5.25A2.25 2.25 0 003 8.25v10.5A2.25 2.25 0 005.25 21h10.5A2.25 2.25 0 0018 18.75V10.5m-10.5 6L21 3m0 0h-5.25M21 3v5.25" />
                    </svg>
                </a>
            </div>

            <!-- Box 4: Links -->
            <div>
                <h4 class="text-white font-bold mb-3">üîó Rechtliches & Links</h4>
                <div class="flex flex-col gap-2 text-sm">
                    <a href="https://www.warenschmiede.com/" class="text-brand-blue hover:text-brand-accent transition-colors">‚Üê Zur Warenschmiede</a>
                    <div class="h-px bg-slate-800 my-1"></div>
                    <a href="https://www.warenschmiede.com/impressum.html" target="_blank" class="text-slate-400 hover:text-white transition-colors">Impressum</a>
                    <a href="https://www.warenschmiede.com/datenschutz.html" target="_blank" class="text-slate-400 hover:text-white transition-colors">Datenschutz</a>
                </div>
            </div>
        </div>
        <div class="text-center text-slate-600 text-xs mt-10 flex flex-col sm:flex-row justify-center gap-4">
            <span>¬© <span id="copyright-year">2026</span> Warenschmiede KI Trainer.</span>
            <span>L√§uft lokal im Browser. Kein Tracking.</span>
        </div>
    </footer>

    <!-- JAVASCRIPT LOGIC -->
    <script>
        // --- SHARE FUNKTION ---
        function sharePage() {
            const shareData = {
                title: 'Warenschmiede KI Prompt-Trainer',
                text: 'Lern mit Beispielen, wie du gute Prompts f√ºr KI schreibst.',
                url: window.location.href
            };
            if (navigator.share) {
                navigator.share(shareData).catch((err) => console.log('Fehler:', err));
            } else {
                navigator.clipboard.writeText(window.location.href)
                    .then(() => alert('Link kopiert!'))
                    .catch(() => alert('Fehler beim Kopieren.'));
            }
        }

        // --- DATEN & LOGIK ---
        const scenes = [
            { id: 'email', title: "E-Mail freundlich formulieren", desc: "Homeoffice beim Chef anfragen.", variants: { bad: [{text: "Schreib mal eine Mail an meinen Chef wegen Homeoffice.", answer: "Betreff: Homeoffice\n\nHallo Chef,\n\nich will morgen Homeoffice machen. Sag Bescheid, ob das okay ist.\n\nGru√ü", explanation: "Der Prompt ist viel zu allgemein. Die KI wei√ü nicht: Welcher Tonfall? Welcher Grund? Wie lang? Das Ergebnis ist unh√∂flich."},{text: "Ich brauch morgen frei, schreib Mail.", answer: "Hallo,\n\nich brauche morgen frei. Danke.", explanation: "Extrem kurz. Die KI kann nicht wissen, an wen die Mail geht oder warum du frei brauchst. Das wirkt respektlos."},{text: "Sag dem Chef ich bin krank per Mail.", answer: "Chef,\n\nich bin krank und komme nicht.\n\nTsch√ºss.", explanation: "Ohne Kontext (z.B. 'h√∂flich', 'Krankschreibung folgt') klingt die Nachricht sehr schroff und unprofessionell."}], good: [{text: "Schreibe eine freundliche, aber bestimmte E-Mail an meinen Chef (Herr M√ºller). Ich m√∂chte f√ºr morgen um einen Tag Homeoffice bitten. \n\nKontext: Ich habe einen Handwerkertermin. \nTon: Professionell, Du-Form.\nL√§nge: ca. 80 W√∂rter.\nFormat: E-Mail mit Betreff.", answer: "Betreff: Anfrage Homeoffice f√ºr morgen\n\nHallo Herr M√ºller,\n\nich hoffe, du hattest einen guten Start in die Woche.\n\nIch w√ºrde morgen gerne aus dem Homeoffice arbeiten, da sich kurzfristig ein Handwerkertermin bei mir ergeben hat. Meine Erreichbarkeit bleibt davon nat√ºrlich unber√ºhrt.\n\nGib mir bitte kurz Bescheid, ob das f√ºr dich in Ordnung ist.\n\nViele Gr√º√üe,", explanation: "Perfekt! Empf√§nger, Grund, Tonfall und Format sind klar definiert. Die KI liefert ein sofort nutzbares Ergebnis."},{text: "Verfasse eine f√∂rmliche E-Mail an meine Chefin (Frau Dr. Weber). Ich bin krank und falle heute aus. \n\nInfos: Attest kommt morgen. Ich bin per Mail erreichbar.\nStil: H√∂flich, kurz, Sie-Form.", answer: "Betreff: Krankmeldung f√ºr heute\n\nSehr geehrte Frau Dr. Weber,\n\nleider muss ich mich f√ºr heute krankmelden. Ein √§rztliches Attest werde ich Ihnen voraussichtlich morgen nachreichen.\n\nF√ºr dringende R√ºckfragen stehe ich Ihnen eingeschr√§nkt per E-Mail zur Verf√ºgung.\n\nMit freundlichen Gr√º√üen,", explanation: "Sehr gut. Klare Anweisungen zum 'Siezen' und wichtige Details (Attest, Erreichbarkeit) machen die Mail professionell."},{text: "Ich muss ein Meeting verschieben. Schreib eine nette Mail an das Team 'Marketing'.\n\nGrund: Doppelbuchung.\nNeuer Vorschlag: Donnerstag 14 Uhr.\nTon: Locker, kollegial.", answer: "Betreff: Verschiebung Marketing-Meeting üìÖ\n\nHi Team,\n\nleider hat sich bei mir der Fehlerteufel eingeschlichen und ich habe eine Doppelbuchung. Sorry!\n\nK√∂nnen wir unser Meeting auf Donnerstag um 14 Uhr schieben? Passt das bei euch?\n\nDanke f√ºr euer Verst√§ndnis!", explanation: "Guter Einsatz von Kontext (Grund) und Tonalit√§t ('Locker'). Die KI nutzt sogar ein Emoji, was zum kollegialen Stil passt."}]} },
            { id: 'learn', title: "Lernhilfe / Erkl√§rung", desc: "Ein schwieriges Thema einfach erkl√§ren.", variants: { bad: [{text: "Erkl√§r mal Photosynthese.", answer: "Die Photosynthese ist ein physiologischer Prozess zur Erzeugung von energiereichen Biomolek√ºlen aus energie√§rmeren Stoffen mithilfe von Lichtenergie.", explanation: "Zu vage. Die KI w√§hlt oft standardm√§√üig eine lexikonartige Sprache. Ohne Zielgruppe ist die Antwort oft zu kompliziert."},{text: "Was ist ein Atom?", answer: "Ein Atom ist der kleinste chemisch nicht weiter teilbare Baustein der Materie. Es besteht aus einem Atomkern und einer Atomh√ºlle.", explanation: "Faktisch richtig, aber didaktisch schwach. Wer fragt? Ein Physikstudent oder ein Erstkl√§ssler? Der Kontext fehlt."},{text: "Hilfe bei Mathe.", answer: "Wobei genau ben√∂tigst du Hilfe? Algebra, Geometrie, Analysis?", explanation: "Der Prompt ist so ungenau, dass die KI gar nicht antworten kann, sondern R√ºckfragen stellen muss."}], good: [{text: "Erkl√§re mir die Photosynthese so, dass es ein 10-j√§hriges Kind versteht. \n\nStil: Nutze einfache Vergleiche (z.B. Kochen).\nL√§nge: Maximal 4 S√§tze.\nFormat: Text + 3 Stichpunkte als Merks√§tze am Ende.", answer: "Stell dir vor, eine Pflanze ist wie ein kleiner Koch. Sie nimmt Sonnenlicht, Wasser und Luft und kocht daraus in ihren gr√ºnen Bl√§ttern ihr eigenes Essen (Zucker).\n\nMerks√§tze:\n‚Ä¢ Pflanzen brauchen Licht und Wasser.\n‚Ä¢ Sie machen daraus Zucker und Sauerstoff.\n‚Ä¢ Das nennt man Photosynthese.", explanation: "Sehr gut. Zielgruppe ('10-j√§hriges Kind') und Wunsch nach Vergleichen f√ºhren zu einer verst√§ndlichen Sprache."},{text: "Erkl√§re das 'Bohr'sche Atommodell' f√ºr einen Sch√ºler der 9. Klasse.\n\nVergleich: Sonnensystem.\nFokus: Aufbau (Kern/H√ºlle).", answer: "Das Bohr'sche Atommodell funktioniert √§hnlich wie unser Sonnensystem. In der Mitte steht die Sonne ‚Äì das ist beim Atom der Atomkern (positiv geladen). Die Planeten, die darum kreisen, sind die Elektronen (negativ geladen) auf festen Bahnen.", explanation: "Der Vergleich mit dem Sonnensystem wurde explizit angefordert und hilft dem Sch√ºler beim Verst√§ndnis."},{text: "Ich muss ein Referat √ºber den Satz des Pythagoras halten. Erstelle eine Gliederung.\n\nZielgruppe: Meine Mitsch√ºler.\nDauer: 5 Minuten.\nInhalt: Formel, Beispiel, Anwendung im Alltag.", answer: "Hier ist eine Gliederung f√ºr dein 5-Minuten-Referat:\n\n1. Einleitung: Wer war Pythagoras?\n2. Die Formel: a¬≤ + b¬≤ = c¬≤ einfach erkl√§rt.\n3. Rechenbeispiel an der Tafel.\n4. Alltag: Wie man damit eine Leiter an die Wand stellt.\n5. Fazit.", explanation: "Statt nur 'Erkl√§re Pythagoras' wurde hier eine konkrete Struktur ('Gliederung', '5 Minuten') angefordert. Sehr hilfreich."}]} },
            { id: 'idea', title: "Ideenfindung / Brainstorming", desc: "Kreative Vorschl√§ge sammeln.", variants: { bad: [{text: "Ich brauche Geschenkideen.", answer: "Hier sind Ideen:\n1. Buch\n2. Parf√ºm\n3. Gutschein\n4. Socken\n5. Tasse", explanation: "Ohne Kontext kann die KI nur raten. Die Liste ist generisch und langweilig."},{text: "Was soll ich kochen?", answer: "Du k√∂nntest Nudeln, Reis oder Kartoffeln kochen. Vielleicht Pizza?", explanation: "Die KI wei√ü nicht, was du magst, was du im K√ºhlschrank hast oder ob du Allergien hast."},{text: "Party Ideen.", answer: "Musik, Tanzen, Essen, Trinken, Spiele.", explanation: "Kein Motto, keine Altersgruppe, kein Budget. Die Antwort ist nutzlos."}], good: [{text: "Ich brauche 5 kreative Geschenkideen f√ºr meinen Bruder.\n\nProfil: Er ist 30 Jahre alt, liebt Camping, kocht gerne drau√üen und mag keine technischen Gadgets.\nBudget: Bis 50 Euro.\nFormat: Liste mit kurzer Begr√ºndung.", answer: "1. Outdoor-Gew√ºrzset (Perfekt f√ºrs Kochen drau√üen).\n2. Personalisierte Emaille-Tasse (Robust).\n3. Feuerstahl-Set (Traditionell, keine Technik).\n4. Buch 'Kochen am Lagerfeuer'.\n5. H√§ngematte f√ºr unterwegs.", explanation: "Exzellent. Das 'Profil' und Budget helfen der KI, spezifische Vorschl√§ge zu machen."},{text: "Schlage mir 3 vegetarische Gerichte vor, die in unter 20 Minuten fertig sind.\n\nZutaten im Haus: Nudeln, Tomaten, Sahne, Zucchini.\nStil: Einfach & lecker.", answer: "1. Cremige Tomaten-Sahne-Pasta mit Zucchini-W√ºrfeln.\n2. One-Pot-Pasta mit frischen Tomaten.\n3. Zucchini-Nudel-Pfanne mit Sahnesauce.", explanation: "Die Einschr√§nkung ('vegetarisch', 'unter 20 Min') und die Zutatenliste liefern ein perfektes Ergebnis."},{text: "Ich plane eine √úberraschungsparty zum 60. Geburtstag meiner Mutter. Sie mag Gartenarbeit und Italien.\n\nAufgabe: Erstelle eine Checkliste f√ºr die Deko und ein Motto.", answer: "Motto-Idee: 'La Dolce Vita im Gr√ºnen'.\n\nCheckliste Deko:\n- [ ] Tischdecken in Rot-Wei√ü kariert.\n- [ ] Kleine Olivenb√§umchen oder Kr√§utert√∂pfe als Tischdeko.\n- [ ] Lichterketten f√ºr die B√§ume im Garten.\n- [ ] Girlanden mit italienischen Flaggen.", explanation: "Das Kombinieren von Interessen (Garten + Italien) zu einem Motto ist eine St√§rke der KI, wenn man sie danach fragt."}]} },
            { id: 'textfix', title: "Text verbessern / pr√ºfen", desc: "Rechtschreibung und Stil korrigieren.", variants: { bad: [{text: "Mach den Text besser: 'hallo kunde ich schik das angebot speter.'", answer: "Hallo Kunde, ich schicke das Angebot sp√§ter.", explanation: "Der Befehl 'besser' ist subjektiv. Die KI korrigiert hier nur die gr√∂bsten Fehler."},{text: "Korrigier mal.", answer: "Bitte gib mir den Text, den ich korrigieren soll.", explanation: "Der Prompt fehlt komplett. Die KI wei√ü nicht, was sie tun soll."},{text: "Liest sich doof: 'Das Produkt ist gut kauf es.'", answer: "Das Produkt ist gut, kaufe es.", explanation: "Nur Grammatik korrigiert, aber der Stil ist immer noch werblich schwach."}], good: [{text: "Korrigiere den Text auf Rechtschreibung und formuliere ihn in ein professionelles Business-Deutsch um.\n\nOriginal: 'hallo kunde ich schik das angebot speter.'\nTon: H√∂flich, f√∂rmlich.\nErg√§nze: Entschuldigung f√ºr die Verz√∂gerung.", answer: "Sehr geehrter Kunde,\n\nvielen Dank f√ºr Ihre Geduld. Ich werde Ihnen das gew√ºnschte Angebot im Laufe des Tages zukommen lassen. Bitte entschuldigen Sie die Verz√∂gerung.\n\nMit freundlichen Gr√º√üen", explanation: "Stark. Der Prompt definiert 'besser' als 'professionelles Business-Deutsch' und gibt inhaltliche Anweisungen."},{text: "Schreibe diesen Satz werblich und attraktiv um, damit Kunden sofort klicken wollen.\n\nSatz: 'Wir haben neue Schuhe im Shop.'\nZielgruppe: Junge Sportler.\nStil: Energetisch, du-Form.", answer: "Bereit f√ºr dein n√§chstes Level? üöÄ Entdecke jetzt unsere brandneuen Laufschuhe im Shop und hol dir den Boost, den du brauchst!", explanation: "Hier wird nicht nur korrigiert, sondern der Zweck ('werblich') und die Zielgruppe ('Sportler') definieren das Ergebnis."},{text: "Pr√ºfe folgenden Text auf Grammatikfehler und gib mir eine Liste der gefundenen Fehler.\n\nText: 'Der Hund laufen in Wald.'", answer: "Korrigierter Satz: Der Hund l√§uft im Wald.\n\nGefundene Fehler:\n1. 'laufen' -> 'l√§uft' (Konjugation)\n2. 'in' -> 'im' (Pr√§position/Fall)", explanation: "Statt nur den Text zu √§ndern, wird hier eine Erkl√§rung ('Liste der Fehler') angefordert. Gut zum Lernen."}]} }
        ];

        // --- STATE & HELPERS ---
        let currentSceneId = null;
        let lastIndices = {};
        const chatWindow = document.getElementById('chat-window');
        const customInput = document.getElementById('custom-input');
        const scoreRingBg = document.getElementById('score-ring-bg');
        
        // NEU: Fortschritts-State
        let progress = {};
        let allCompletedShown = false;

        function init() {
            // Init Progress State
            scenes.forEach(s => {
                progress[s.id] = { badSeen: false, goodSeen: false };
            });
            
            renderSceneList();
            updateProgressUI(); // Initialanzeige
            selectScene('email');
        }

        // --- RENDER SCENE LIST ---
        function renderSceneList() {
            const container = document.getElementById('scene-list');
            container.innerHTML = scenes.map(scene => {
                // Status bestimmen
                const p = progress[scene.id];
                const isComplete = p.badSeen && p.goodSeen;
                const isStarted = p.badSeen || p.goodSeen;
                
                let statusBadge = '';
                let borderClass = 'border-slate-700 hover:border-slate-600';
                
                if (isComplete) {
                    statusBadge = `
                        <span class="flex items-center gap-1 text-emerald-400 font-bold">
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-3 h-3">
                              <path fill-rule="evenodd" d="M16.704 4.153a.75.75 0 01.143 1.052l-8 10.5a.75.75 0 01-1.127.075l-4.5-4.5a.75.75 0 011.06-1.06l3.894 3.893 7.48-9.817a.75.75 0 011.05-.143z" clip-rule="evenodd" />
                            </svg>
                            Erledigt
                        </span>
                    `;
                    // Wenn aktiv, wird border sp√§ter √ºberschrieben, aber wir nutzen hier f√ºr inaktive den gr√ºnen Touch
                    if (currentSceneId !== scene.id) borderClass = 'border-emerald-900/50 bg-emerald-900/10 hover:bg-emerald-900/20';
                } else if (isStarted) {
                    statusBadge = `<span class="text-yellow-500">Halb erledigt</span>`;
                } else {
                    statusBadge = `<span class="text-slate-500">Noch nicht gestartet</span>`;
                }

                // Active check handled in selectScene mostly, but initially rendering helps
                return `
                <button onclick="selectScene('${scene.id}')" 
                        id="scene-btn-${scene.id}"
                        class="w-full text-left p-4 rounded-xl border ${borderClass} bg-slate-800 transition-all group focus:outline-none relative overflow-hidden">
                    <div class="flex justify-between items-start mb-1 relative z-10">
                        <span class="font-bold text-slate-200 group-hover:text-brand-accent transition-colors">${scene.title}</span>
                    </div>
                    <p class="text-xs text-slate-300 font-medium line-clamp-2 mb-3 relative z-10">${scene.desc}</p>
                    
                    <!-- Status Leiste -->
                    <div class="flex justify-between items-center text-[10px] border-t border-slate-700/50 pt-2 relative z-10">
                        <span class="text-slate-400">Status:</span>
                        ${statusBadge}
                    </div>
                </button>
            `}).join('');
        }

        function selectScene(id) {
            currentSceneId = id;
            const scene = scenes.find(s => s.id === id);
            
            // Re-render to ensure borders are correct, then apply active style
            renderSceneList();
            
            document.querySelectorAll('[id^="scene-btn-"]').forEach(btn => {
                // Base styles are set in render, just remove specific active class if it stuck
                btn.classList.remove('ring-2', 'ring-brand-blue', 'bg-slate-750');
            });
            
            const activeBtn = document.getElementById(`scene-btn-${id}`);
            activeBtn.classList.remove('border-slate-700', 'border-emerald-900/50'); // Remove base borders
            activeBtn.classList.add('border-brand-blue', 'bg-slate-750', 'ring-1', 'ring-brand-blue/50');

            document.getElementById('chat-title').innerText = scene.title;
            chatWindow.innerHTML = `
                <div class="flex gap-3 bubble-enter">
                    <div class="w-8 h-8 rounded-full bg-slate-700 flex items-center justify-center flex-shrink-0 text-xs text-slate-300">AI</div>
                    <div class="bg-slate-800 text-slate-300 p-3 rounded-2xl rounded-tl-none text-sm shadow-sm border border-slate-700/50 max-w-[85%]">
                        Ich bin bereit f√ºr die Aufgabe: <strong>"${scene.title}"</strong>. <br>W√§hle einen Prompt, ich zeige dir zuf√§llige Beispiele.
                    </div>
                </div>
            `;
            
            resetAnalysis();
            enableControls();
        }

        // --- LOGIK & PROGRESS ---
        function sendPrompt(type) {
            // Update Progress
            const p = progress[currentSceneId];
            if (type === 'bad') p.badSeen = true;
            if (type === 'good') p.goodSeen = true;
            updateProgressUI();

            const scene = scenes.find(s => s.id === currentSceneId);
            const variants = scene.variants[type];
            const key = `${currentSceneId}_${type}`;
            
            let newIndex = 0;
            if (variants.length > 1) {
                do {
                    newIndex = Math.floor(Math.random() * variants.length);
                } while (newIndex === lastIndices[key] && variants.length > 1);
            }

            lastIndices[key] = newIndex;
            const data = variants[newIndex];
            
            disableControls();
            appendUserMessage(data.text);

            setTimeout(() => {
                showTypingIndicator();
                updateAnalysisUI(data.text, data.explanation);

                setTimeout(() => {
                    removeTypingIndicator();
                    appendBotMessage(data.answer);
                    enableControls();
                    // Liste aktualisieren, um Status (Haken/Farbe) live zu zeigen, ohne Auswahl zu verlieren
                    renderSceneList();
                    // Active state wiederherstellen
                    const activeBtn = document.getElementById(`scene-btn-${currentSceneId}`);
                    activeBtn.classList.remove('border-slate-700', 'border-emerald-900/50');
                    activeBtn.classList.add('border-brand-blue', 'bg-slate-750', 'ring-1', 'ring-brand-blue/50');

                }, 1000 + Math.random() * 500); 
            }, 500);
        }

        function updateProgressUI() {
            let completedCount = 0;
            const total = scenes.length;

            scenes.forEach(s => {
                if (progress[s.id].badSeen && progress[s.id].goodSeen) {
                    completedCount++;
                }
            });

            // Text Update
            document.getElementById('progress-summary').innerText = `Szenen erledigt: ${completedCount} / ${total}`;

            // Check All Done
            if (completedCount === total && !allCompletedShown) {
                allCompletedShown = true;
                setTimeout(() => {
                    showRewardCard();
                }, 1500); // Kurz warten nach dem letzten Klick
            }
        }

        function showRewardCard() {
            // Karte anzeigen
            const card = document.getElementById('reward-card');
            card.classList.remove('hidden');
            
            // Header Badge anzeigen
            document.getElementById('header-badge').classList.remove('hidden');
            
            // Smooth scroll zur Belohnung (falls mobil oder kleiner Screen)
            card.scrollIntoView({ behavior: 'smooth', block: 'center' });
        }

        function showUserPrompt() {
            const text = customInput.value.trim();
            if (!text) return;

            disableControls();
            appendUserMessage(text);
            customInput.value = '';

            setTimeout(() => {
                updateAnalysisUI(text, "Das ist dein eigener Prompt. Ich habe ihn analysiert (siehe oben). Da ich nur ein Trainer bin, kann ich keine echte Antwort generieren.");
                appendBotMessage("Dies ist ein Trainings-Modus. Ich analysiere deinen Text (siehe rechts), generiere aber keine neue Antwort.");
                enableControls();
            }, 600);
        }

        // --- UI HELPERS (Standard) ---
        function appendUserMessage(text) {
            const div = document.createElement('div');
            div.className = "flex gap-3 flex-row-reverse bubble-enter";
            div.innerHTML = `
                <div class="w-8 h-8 rounded-full bg-brand-blue flex items-center justify-center flex-shrink-0 text-xs text-white">DU</div>
                <div class="bg-brand-blue/10 text-brand-blue border border-brand-blue/20 p-3 rounded-2xl rounded-tr-none text-sm shadow-sm max-w-[85%] font-mono text-xs leading-relaxed whitespace-pre-wrap">${text}</div>
            `;
            chatWindow.appendChild(div);
            chatWindow.scrollTop = chatWindow.scrollHeight;
        }

        function appendBotMessage(text) {
            const div = document.createElement('div');
            div.className = "flex gap-3 bubble-enter";
            div.innerHTML = `
                <div class="w-8 h-8 rounded-full bg-slate-700 flex items-center justify-center flex-shrink-0 text-xs text-slate-300">AI</div>
                <div class="bg-slate-800 text-slate-300 p-3 rounded-2xl rounded-tl-none text-sm shadow-sm border border-slate-700/50 max-w-[85%] whitespace-pre-wrap border-l-4 border-l-slate-600">${text}</div>
            `;
            chatWindow.appendChild(div);
            chatWindow.scrollTop = chatWindow.scrollHeight;
        }

        function showTypingIndicator() {
            const div = document.createElement('div');
            div.id = 'typing-indicator';
            div.className = "flex gap-3 bubble-enter";
            div.innerHTML = `
                <div class="w-8 h-8 rounded-full bg-slate-700 flex items-center justify-center flex-shrink-0 text-xs text-slate-300">AI</div>
                <div class="bg-slate-800 p-4 rounded-2xl rounded-tl-none border border-slate-700/50 flex gap-1 items-center h-10">
                    <div class="w-2 h-2 bg-slate-500 rounded-full typing-dot"></div>
                    <div class="w-2 h-2 bg-slate-500 rounded-full typing-dot"></div>
                    <div class="w-2 h-2 bg-slate-500 rounded-full typing-dot"></div>
                </div>
            `;
            chatWindow.appendChild(div);
            chatWindow.scrollTop = chatWindow.scrollHeight;
        }

        function removeTypingIndicator() {
            const el = document.getElementById('typing-indicator');
            if(el) el.remove();
        }

        function disableControls() {
            document.getElementById('btn-bad').disabled = true;
            document.getElementById('btn-good').disabled = true;
            document.querySelector('#custom-input').nextElementSibling.disabled = true;
        }

        function enableControls() {
            document.getElementById('btn-bad').disabled = false;
            document.getElementById('btn-good').disabled = false;
            document.querySelector('#custom-input').nextElementSibling.disabled = false;
        }

        // --- ANALYSIS LOGIC ---
        function calculateScore(text) {
            let score = 0;
            const lowerText = text.toLowerCase();
            const length = text.length;
            let scores = { clarity: 5, context: 0, struct: 0, example: 0 };

            const verbs = ["schreibe", "formuliere", "erkl√§re", "erstelle", "korrigiere", "fasse zusammen", "analysiere", "pr√ºfe", "√ºberarbeite"];
            if (verbs.some(v => lowerText.includes(v))) scores.clarity += 10;
            if (length > 30) scores.clarity += 10; 
            
            const contextWords = ["f√ºr", "zielgruppe", "niveau", "alter", "hintergrund", "situation", "mein", "chef", "kind", "kollege", "bruder", "mutter", "kunden"];
            if (contextWords.some(w => lowerText.includes(w))) scores.context += 15;
            if (lowerText.includes("du bist") || lowerText.includes("rolle")) scores.context += 10;

            const structWords = ["liste", "tabelle", "bullet", "stichpunkte", "format", "mail", "betreff", "anzahl", "w√∂rter", "s√§tze", "gliederung", "checkliste"];
            if (structWords.some(w => lowerText.includes(w))) scores.struct += 15;
            if (lowerText.includes(":")) scores.struct += 10;

            const exampleWords = ["beispiel", "z.b.", "wie", "stil", "ton", "art", "muster", "original"];
            if (exampleWords.some(w => lowerText.includes(w))) scores.example += 15;
            if (text.includes('"') || text.includes("'")) scores.example += 10;

            scores.clarity = Math.min(25, scores.clarity);
            scores.context = Math.min(25, scores.context);
            scores.struct = Math.min(25, scores.struct);
            scores.example = Math.min(25, scores.example);

            const total = scores.clarity + scores.context + scores.struct + scores.example;
            return { total, details: scores };
        }

        function updateAnalysisUI(text, explanation) {
            const result = calculateScore(text);
            
            animateValue("score-value", parseInt(document.getElementById("score-value").innerText) || 0, result.total, 1000);
            
            const scoreText = document.getElementById("score-text");
            if (result.total < 40) {
                scoreText.innerText = "Ausbauf√§hig";
                scoreText.className = "text-xs text-red-400 font-bold";
                scoreRingBg.className = "w-full h-full rounded-full border-4 border-red-500/30";
            } else if (result.total < 75) {
                scoreText.innerText = "Guter Anfang";
                scoreText.className = "text-xs text-yellow-400 font-bold";
                scoreRingBg.className = "w-full h-full rounded-full border-4 border-yellow-500/30";
            } else {
                scoreText.innerText = "Exzellent";
                scoreText.className = "text-xs text-emerald-400 font-bold";
                scoreRingBg.className = "w-full h-full rounded-full border-4 border-emerald-500/30";
            }

            updateBar("crit-clarity", result.details.clarity);
            updateBar("crit-context", result.details.context);
            updateBar("crit-struct", result.details.struct);
            updateBar("crit-example", result.details.example);

            document.getElementById("analysis-text").innerHTML = explanation;
        }

        function updateBar(idPrefix, value) {
            document.getElementById(`${idPrefix}-val`).innerText = `${value}/25`;
            document.getElementById(`${idPrefix}-bar`).style.width = `${(value/25)*100}%`;
        }

        function resetAnalysis() {
            document.getElementById("score-value").innerText = "-";
            document.getElementById("score-text").innerText = "Warte auf Prompt...";
            document.getElementById("score-text").className = "text-xs text-slate-500";
            document.getElementById("score-ring-bg").className = "w-full h-full rounded-full border-4 border-slate-700";
            
            ["crit-clarity", "crit-context", "crit-struct", "crit-example"].forEach(id => {
                document.getElementById(`${id}-val`).innerText = "0/25";
                document.getElementById(`${id}-bar`).style.width = "0%";
            });

            document.getElementById("analysis-text").innerText = "W√§hle einen Prompt, um zu sehen, warum er gut oder schlecht ist.";
        }

        function animateValue(id, start, end, duration) {
            if (start === end) return;
            const range = end - start;
            let current = start;
            const increment = end > start ? 1 : -1;
            const stepTime = Math.abs(Math.floor(duration / range));
            const obj = document.getElementById(id);
            const timer = setInterval(function() {
                current += increment;
                obj.innerHTML = current;
                if (current == end) {
                    clearInterval(timer);
                }
            }, stepTime > 0 ? stepTime : 10);
        }

        init();
    </script>
<script>
  // Auto-Update Copyright Year
  document.getElementById('copyright-year').textContent = new Date().getFullYear();
</script>
</body>
</html>